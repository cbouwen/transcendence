<!-- your_app/templates/tetris_game.html -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Multi-Player Tetris</title>
    <script src="{% static 'tetris_multiplayer.js' %}" defer></script>
</head>
<body>
    <script>
        // Inject the playerConfigs from Django context into JavaScript
        const playerConfigs = [
            {% for player in player_configs %}
            {
                name: "{{ player.name|escapejs }}",
                controls: {
                    left: "{{ player.controls.left|escapejs }}",
                    right: "{{ player.controls.right|escapejs }}",
                    down: "{{ player.controls.down|escapejs }}",
                    rotate: "{{ player.controls.rotate|escapejs }}"
                }
            }{% if not forloop.last %},{% endif %}
            {% endfor %}
        ];

        window.onload = function() {
            launchTetrisGame(playerConfigs);
        };
    </script>
</body>
</html>
